<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Scatter Plot Matrix</title>
<style>

.axis,
.frame {
  shape-rendering: crispEdges;
}

.axis line {
  stroke: #ddd;
}

</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<style type="text/css">
</style>
</head>
<script>

var margin = {
  top: 20,
  right: 20,
  bottom: 50,
  left: 70,
},

width = 960;
size = 230;
padding = 30;

var x = d3.scaleLinear()
    .range([padding/2, size - padding/2]);

var y = d3.scaleLinear()
    .range([size - padding/2, padding/2]);

var xAxis = d3.axisBottom()
              .scale(x)
              .ticks(6);
var yAxis = d3.axisLeft()
              .scale(y)
              .ticks(6);

var color = d3.scaleOrdinal(d3.schemeCategory10);

d3.csv("cars/scatter1.csv", function(error, data) {
  if (error) throw error;

// Got this from Mike Bostock's code
  var domainByTrait = {},
      traits = d3.keys(data[0]).filter(function(d) {
        return d !== "States";
      }),
      n = traits.length;

  traits.forEach(function(trait) {
    domainByTrait[trait] = d3.extent(data, function(d) {
      return d[trait];
    });
  })

xAxis.tickSize(size*n);
yAxis.tickSize(-size*n);

var svg = d3.select("body")
    .append("svg")
    .attr("width", size * n  + padding)
    .attr("height", size * n + padding)
  .append("g")
    .attr("transform", "translate(" + padding + "," + padding/2 + ")");

  svg.selectAll(".x.axis")
      .data(traits)
    .enter().append("g")
      .attr("class", "x axis")
      .attr("transform", function(d, i) {
        return "translate(" + (n - i - 1) * size + ",0)";
      })
      .each(function(d) {
        x.domain(domainByTrait[d]);
        d3.select(this).call(xAxis);
      });

  svg.selectAll(".y.axis")
      .data(traits)
    .enter().append("g")
      .attr("class", "y axis")
      .attr("transform", function(d, i) {
        return "translate(0," + i * size + ")";
      })
      .each(function(d) {
        y.domain(domainByTrait[d]);
        d3.select(this).call(yAxis);
      });

      svg.append("text")
      .text("Scatterplot matrix")
      .attr("x", width/2)
      .attr("y",0)
      .style("text-anchor","middle");

  function cross(a, b) {
    var c = [],
    n = a.length;
    m = b.length;

    for(var i = -1; ++i < n;)
      for(var j = -1; ++j < m;)
        c.push({
          x: a[i],
          i: i,
          y: b[j],
          j: j
        });
        return c;
  }
  var cell = svg.selectAll(".cell")
      .data(cross(traits, traits))
    .enter().append("g")
      .attr("class", "cell")
      .attr("transform", function(d) {
        return "translate(" + (n - d.i - 1) * size + "," + d.j * size + ")";
       })
      .each(plot);

      cell.append("text")
      .attr("x", padding)
      .attr("y", padding)
      .attr("dy", ".71em")
      .text(function(d) {
        return d.x;
      });

  function plot(p) {
    var cell = d3.select(this);

    x.domain([0,50]);
    y.domain([0,50]);


    cell.selectAll("circle")
    .data(data)
    .enter().append("circle")
    .attr("cx", function (d) {
      return x(d[p.x]);
    })
    .attr("cy", function (d) {
      return y(d[p.y]);
    })
    .attr("r", 3.5)
    .style("fill", function (d) {
      return color(d.Make);
    });
  }
});
</script>
</body>
</html>
<!--
Work Cited :
(1) https://bl.ocks.org/Fil/6d9de24b31cb870fed2e6178a120b17d
(2) http://bl.ocks.org/wenzhaoduo/46ac73313dda6723ae220337ff13b99b
(3) https://bl.ocks.org/mbostock/4063663
-->